<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博客管理 - 我的博客</title>
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="blog-title">我的博客</h1>
                <p class="blog-subtitle">分享生活与技术</p>
            </div>
            <nav class="nav">
                <a href="/" class="nav-link">首页</a>
                <a href="/admin" class="nav-link active">管理</a>
            </nav>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <div class="admin-layout">
                <div class="admin-sidebar">
                    <div class="sidebar-section">
                        <h2 class="sidebar-title">发布新文章</h2>
                        <form id="postForm" class="post-form">
                            <div class="form-group">
                                <label for="title">文章标题</label>
                                <input type="text" id="title" name="title" required placeholder="输入文章标题">
                            </div>

                            <div class="form-group">
                                <label for="tags">标签（用逗号分隔）</label>
                                <input type="text" id="tags" name="tags" placeholder="例如: 技术, 生活, 教程">
                            </div>

                            <div class="form-group">
                                <label for="content">文章内容（支持Markdown）</label>
                                <textarea id="content" name="content" required placeholder="输入文章内容，支持Markdown格式" rows="15"></textarea>
                            </div>

                            <button type="submit" class="btn btn-primary">发布文章</button>
                        </form>
                    </div>
                </div>

                <div class="admin-main">
                    <h2 class="section-title">已发布文章</h2>
                    <div class="posts-list">
                        <% posts.forEach(post => { %>
                        <div class="post-item">
                            <div class="post-item-content">
                                <h3 class="post-item-title"><%= post.title %></h3>
                                <div class="post-item-meta">
                                    <span class="post-date"><%= new Date(post.date).toLocaleDateString('zh-CN') %></span>
                                    <span class="post-views"><%= post.views %> 次阅读</span>
                                </div>
                            </div>
                            <div class="post-item-actions">
                                <a href="/post/<%= post.id %>" class="btn btn-sm btn-secondary">查看</a>
                                <button class="btn btn-sm btn-danger" onclick="deletePost(<%= post.id %>)">删除</button>
                            </div>
                        </div>
                        <% }) %>

                        <% if (posts.length === 0) { %>
                        <div class="empty-state">
                            <p>还没有发布任何文章</p>
                        </div>
                        <% } %>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 我的博客. 保留所有权利.</p>
        </div>
    </footer>

    <script src="/js/main.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>
